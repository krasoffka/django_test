## django_test

### Поднимаем локально:

Билдим образ докер(выполняем из папки в которой лежит файл docker-compose.yaml)
~~~
docker-compose build
~~~

Поднимаем проект
~~~
docker-compose up
~~~

1) Создаем суперюзера для просмотра джанго админки, на всякий случай
2) В базу заливаем тестовые данные, для этого сначала заходим в контейнер
~~~
docker-compose exec django_test bash
~~~
увидим что то похожее
~~~
root@247f590f24bc:/opt/django_test# 
~~~

теперь для пункта 1 выполняем команду
~~~
python manage.py createsuperuser
~~~
 и следуем инстуркциям, вводим логин, пароль(любой), почту(можно просто нажать Enter)

для п.2. Параметр --row_num 1000 указывает сколько создать записей(в данном случае 1000). Сколько нужно, столько и создаем.
1000 записей создается примерно 3 секунды, в зависимости от ПК.
~~~
python manage.py add_test_data_to_contact_table --row_num 1000
~~~
Можно выйти из контейнера

###Получили:
- админка тут 
~~~
http://0.0.0.0:8000/admin/
~~~
- список контактов 
~~~
http://0.0.0.0:8000/contact/
~~~
- по конкретному контакту
~~~
http://0.0.0.0:8000/contact/id <- id из БД
например http://0.0.0.0:8000/contact/5
~~~

БД, если нужна тут 
~~~
DATABASES = {
    'default': {
        'NAME': 'postgres',
        'USER': 'postgres',
        'HOST': 'db',
        'PORT': 5432,
    }
}
~~~
### Доп функционал при разработке
Пункт - @Зайти в докер контейнер@ </br>

Для всех manage команд(начинаются с "python manage.py") поднимаем контейнер и заходим в него.
~~~
docker-compose build  # опционально/не обязательно
docker-compose up  # поднимаем
docker-compose exec django_test bash  # хоп и мы в контейнере
~~~

- Загрузка тест данных в БД
~~~
Пункт - @Зайти в докер контейнер@
python manage.py add_test_data_to_contact_table --row_num 1000
~~~
- Очистить БД от всего
~~~
Пункт - @Зайти в докер контейнер@
python manage.py clear_db
~~~